---
title: JWT 문제 해결 JWT Malformed 오류와 쿠키 저장
date: 2023-08-02 20:00:00 +0900
categories:
  - JavaScript
tags:
  - JWT
  - Malformed
---

## 문제 상황과 원인

"JWT Malformed"라는 오류는 JSON Web Token(JWT)과 관련한 문제로 발생합니다. 이 오류는 주로 토큰 형식이 올바르지 않거나 변조되었을 때 나타납니다. 쿠키에 JWT 토큰을 저장할 때도 이런 문제가 생길 수 있습니다. 원인은 다양하지만, 토큰이 손상되거나 쿠키 설정이 잘못된 경우가 대표적입니다.

## 해결 방법 1: 토큰 형식 확인

먼저 JWT 토큰의 형식이 올바른지 확인합니다. 토큰은 보통 `헤더.내용.서명` 형태로 구성되어 있습니다. 만약 이 세 부분 중 하나라도 빠지거나 변경되면 "JWT Malformed" 오류가 발생할 수 있습니다.

## 해결 방법 2: 쿠키 설정 검토

쿠키에 토큰을 저장할 때, 쿠키 설정이 올바른지 확인해야 합니다. `HttpOnly`나 `Secure` 등의 설정이 올바르게 적용되었는지 확인하세요. 설정이 잘못되면 브라우저가 토큰을 올바르게 해석하지 못해 오류가 발생할 수 있습니다.

## 해결 방법 3: 서버와 클라이언트 동기화

서버와 클라이언트 사이의 시간이 동기화되어 있는지 확인합니다. 만료 시간(`exp`)이 지나면 토큰은 더 이상 유효하지 않으므로, 서버와 클라이언트의 시간이 정확히 동기화되어 있어야 합니다.

## 해결 방법 4: 코드 디버깅

코드에서 "JWT Malformed" 오류가 어디서 발생하는지 찾아보세요. 오류를 일으키는 코드 부분을 찾았다면, 해당 코드를 수정하거나 필요한 경우에는 전체 로직을 재검토해 보세요.

## 마무리

"JWT Malformed" 오류는 다양한 원인으로 발생할 수 있습니다. 토큰 형식, 쿠키 설정, 서버와 클라이언트의 시간 동기화 등을 체크하면 대부분의 문제를 해결할 수 있을 것입니다. 문제를 찾고 해결하는 과정에서 코드의 품질도 함께 높일 수 있으므로, 이러한 문제는 개발 과정에서 중요한 경험이 될 수 있습니다.